<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- âœ… important -->
<title>Staff Management</title>
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<style>
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  margin: 0; padding: 0;
  background: skyblue;
  color: #333;
}
header {
  background: linear-gradient(135deg, #4285f4, #6ea8fe);
  color: white;
  padding: 25px 0;
  text-align: center;
  box-shadow: 0 3px 6px rgba(0,0,0,0.1);
}
header h1 { margin: 0; font-size: 28px; letter-spacing: 1px; }
nav {
  background: #ffffff;
  display: flex;
  justify-content: center;
  gap: 25px;
  padding: 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  flex-wrap: wrap;
}
nav a {
  text-decoration: none;
  color: #4285f4;
  font-weight: 600;
  padding: 8px 14px;
  border-radius: 5px;
  transition: 0.3s;
}
nav a:hover { background: #4285f4; color: white; }
.container {
  max-width: 1100px;
  margin: 40px auto;
  background: white;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

/* Search Bar */
form.search-form {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}
input[type="text"] { flex:1; padding:10px; border-radius:6px; border:1px solid #ccc; }
input[type="text"]:focus { border-color:#4285f4; outline:none; }
button { padding:10px 18px; background:#4285f4; border:none; border-radius:6px; color:white; font-weight:bold; cursor:pointer; transition:0.3s; }
button:hover { background:#357ae8; }
.add-btn { margin-bottom: 20px; }

/* Add Staff Form */
#addStaffForm {
  display: none;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
}
#addStaffForm input { flex:1; min-width: 250px; padding:10px; border:1px solid #ccc; border-radius:6px; }
#addStaffForm input:focus { border-color:#4285f4; outline:none; }

/* Table (desktop) */
table { width:100%; border-collapse:collapse; border-radius:8px; overflow:hidden; }
th, td { padding:12px 15px; text-align:left; }
th { background:#4285f4; color:white; font-weight:600; font-size:15px; }
td { border-bottom:1px solid #e6e6e6; }
tr:nth-child(even){background:#f9fbff;}
tr:hover{background:#f1f7ff;}
td:last-child { text-align: center; }

/* Action Buttons */
a.edit-btn, a.delete-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  border-radius: 8px;
  color: white;
  text-decoration: none;
  font-size: 18px;
  transition: all 0.3s ease;
}
a.edit-btn { background: #ff9800; margin-right: 8px; }
a.edit-btn:hover { background: #e68900; }
a.delete-btn { background: #dc3545; }
a.delete-btn:hover { background: #b02a37; }

/* ============================
   ðŸ“± MOBILE VIEW (â‰¤600px)
   ============================ */
@media (max-width:600px) {
  header { padding: 18px 0; }
  header h1 { font-size: 22px; }
  nav {
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 10px 0;
  }
  nav a {
    width: 90%;
    text-align: center;
    border: 1px solid #4285f4;
    padding: 8px 12px;
  }
  .container { width:95%; margin:15px auto; padding:18px; }

  form.search-form { flex-direction: column; }
  input[type="text"], button, .add-btn { width:100%; }

  /* Vertical card table */
  table thead { display:none; }
  table, tbody, tr, td { display:block; width:100%; }
  tr {
    margin-bottom: 12px;
    background:#fff;
    border:1px solid #ddd;
    border-radius:8px;
    padding:10px;
  }
  td {
    text-align:left !important;
    padding:10px 8px;
    border:none;
    position:relative;
  }
  td::before {
    content: attr(data-label);
    font-weight:600;
    color:#4285f4;
    display:block;
    margin-bottom:4px;
    font-size:14px;
  }
  td[data-label="Actions"] {
    display:flex !important;
    flex-direction:row;
    justify-content:flex-start;
    gap:10px;
    padding-top:12px;
  }
}
</style>

<script>
function toggleAddForm() {
  var form = document.getElementById('addStaffForm');
  form.style.display = (form.style.display === 'none' || form.style.display === '') ? 'flex' : 'none';
}
</script>
</head>

<body>

<header><h1>Staff Management</h1></header>

<nav>
  <a href="{% url 'dashboard' %}">Home</a>
  <a href="{% url 'appointments' %}">Appointments</a>
  <a href="{% url 'staff_management' %}">Staff</a>
  <a href="/admin/logout/">Logout</a>
</nav>

<div class="container">

  <!-- Search Bar -->
  <form method="GET" class="search-form">
    <input type="text" name="search" placeholder="Search staff by name..." value="{{ search_query|default:'' }}">
    <button type="submit">Search</button>
  </form>

  <!-- Add Staff Button -->
  <button class="add-btn" onclick="toggleAddForm()">+ Add New Staff</button>

  <!-- Add Staff Form -->
  <form method="POST" id="addStaffForm">
    {% csrf_token %}
    <input type="text" name="name" placeholder="Staff Name" required>
    <input type="text" name="role" placeholder="Role" required>
    <input type="text" name="department" placeholder="Department">
    <input type="text" name="contact" placeholder="Contact">
    <input type="email" name="email" placeholder="Email">
    <input type="text" name="address" placeholder="Address">
    <button type="submit">Add Staff</button>
  </form>

  <!-- Staff Table -->
  <table>
    <thead>
      <tr>
        <th>ID</th><th>Name</th><th>Role</th><th>Department</th>
        <th>Contact</th><th>Email</th><th>Address</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for staff_member in staff %}
      <tr>
        <td data-label="ID">{{ staff_member.id }}</td>
        <td data-label="Name">{{ staff_member.name }}</td>
        <td data-label="Role">{{ staff_member.role }}</td>
        <td data-label="Department">{{ staff_member.department }}</td>
        <td data-label="Contact">{{ staff_member.contact }}</td>
        <td data-label="Email">{{ staff_member.email }}</td>
        <td data-label="Address">{{ staff_member.address }}</td>
        <td data-label="Actions">
          <a href="{% url 'edit_staff' staff_member.id %}" class="edit-btn"><i class='bx bx-edit'></i></a>
          <a href="{% url 'delete_staff' staff_member.id %}" class="delete-btn" onclick="return confirm('Delete this staff member?');"><i class='bx bx-trash'></i></a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="8" style="text-align:center; color:#666;">No staff members found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

</div>

</body>
</html>
